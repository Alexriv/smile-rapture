{% extends 'layout.html' %}
{% block content %}
    <h2>Experiment Status</h2>
    <p>Logged in as <strong>{{ user.name_id }}</strong></p>
    {% if user.experiment_ids %}
        <ul class="status-pane-list">
            {% for exp in experiments %}
                <li class="status-pane-li">
                    <div class="status-pane-div" id="experiment-{{ exp.experiment_uuid }}">
                        <h2><a style="text-decoration: none"
                               href="/experiment/{{ exp.experiment_uuid }}">{{ exp.experiment_uuid }}</a></h2>
                        <p>Created by <strong>{{ exp.created_by }}</strong> at
                            <strong>{{ ts_formatted(exp.created_at) }}</strong></p>
                        <p>Node Count: <strong>{{ exp.nodes|length }}</strong></p>
                        <h4>Status:</h4>
                        <div id="status-{{ exp.experiment_uuid }}"
                             hx-get="/experiment/{{ exp.experiment_uuid }}/status/"
                             hx-trigger="every 1s" hx-target="this">
                            Loading status...
                        </div>
                        <h4>Output Log:</h4>
                        <div id="results-{{ exp.experiment_uuid }}" class="terminal"
                             hx-get="/experiment/{{ exp.experiment_uuid }}/results/" hx-trigger="every 1s"
                             hx-target="this">
                            Loading results...
                        </div>
                    </div>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No experiments are currently available.</p>
    {% endif %}
{% endblock %}
